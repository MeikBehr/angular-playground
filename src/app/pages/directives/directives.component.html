<section class="directives">

    <aside class="side-nav" role="navigation">
        <a href="directives/#ngif">*ngIf</a>
        <a href="directives/#atIfElse">&#64;if / &#64;else</a>
        <a href="directives/#ngfor">*ngFor</a>
        <a href="directives/#atFor">&#64;For</a>
        <a href="directives/#switch">*ngSwitch</a>
        <a href="directives/#atSwitch">&#64;Switch</a>
        <a href="directives/#ngclass">ngClass</a>
        <a href="directives/#ngstyle">ngStyle</a>
        <a href="directives/#assignments">Assignments</a>
    </aside>

    <div class="directives-container container">

        <main class="content">

            <h1>Directives</h1>
            <p>Directives (Anweisungen) sind ein Kernfeature von Angular. Sie sind Klassen, die Angular im Template verwendet, um das Verhalten oder die Struktur von DOM-Elementen, Komponenten und anderen Direktiven zu manipulieren.</p>
            <p>Es gibt drei Hauptkategorien von Directives in Angular:</p>
            <ul>
                <li><strong>Structural Directives (Struktur-Direktiven)</strong>: Diese verändern das Layout der DOM (Document Object Model), indem sie DOM-Elemente hinzufügen, entfernen oder manipulieren. Beispiele: <code>*ngIf</code>, <code>*ngFor</code>.</li>
                <li><strong>Attribute Directives (Attribut-Direktiven)</strong>: Diese verändern das Aussehen oder das Verhalten eines existierenden Elements, einer Komponente oder einer anderen Direktive. Sie verändern nicht die DOM-Struktur. Beispiele: <code>NgClass</code>, <code>NgStyle</code>.</li>
                <li><strong>Component Directives (Komponenten-Direktiven)</strong>: Dies sind Directives mit einem eigenen Template. Da jede Angular-Komponente technisch gesehen eine Directive ist, ist dies die dritte Kategorie. Sie sind für das Rendering, das Verhalten und die Kapselung der Ansicht (View) zuständig.</li>
            </ul>
            <p>In den meisten Projekten arbeiten wir ständig mit Components plus ein paar zentralen Structural/Attribute Directives – deshalb lohnt sich hier ein solides Verständnis.</p>
            <br>

            <section id="ngif">
                <h2>*ngIf</h2>
                <article>
                    <p>Diese Direktive verwendet man, um Elemente wirklich aus dem DOM zu entfernen oder wieder hinzuzufügen. Im Gegensatz zu CSS (z. B. <code>display:none</code>) wird das Element nicht nur ausgeblendet, sondern komplett entfernt. Zur Nutzung muss das CommonModule importiert werden. Da das Element aus dem DOM entfernt wird, kann es beim Ein- und Ausblenden zu sichtbaren Layout-Sprüngen kommen, wenn man keine eigenen Animationen verwendet</p>
                    <div class="showCode">
                        <h4>Code:</h4>
                        <pre [innerText]="codeExampleNgIf"></pre>
                    </div>
                    <div class="assignment-container">
                        <button class="btn" (click)="toggleDisplayNgif()">Ein-/Ausblenden</button>
                        <div class="btn-green" *ngIf="displayNgIf; else hiddenContent"></div>
                        <ng-template #hiddenContent>
                            <div>Content is hidden</div>
                        </ng-template>
                    </div>
                </article>
            </section>


            <section id="atIfElse">
                <h2>&#64;if / &#64;else</h2>
                <article>
                    <p>Die <code>&#64;if</code> und <code>&#64;else</code> Direktiven sind ab Angular 17 verfügbar und sollten am besten die alte <code>*ngIf</code>-Direktive ersetzen.</p>
                    <p><code>*ngIf</code> ist eine klassische Angular-Direktive, die selbst mit <code>&#64;Directive</code>implementiert ist und zur Laufzeit ausgewertet wird. <code>&#64;if</code> hingegen ist Teil der neuen Control-Flow-Syntax ab Angular 17 und wird direkt vom Template-Compiler verarbeitet. Dadurch ist <code>&#64;if</code> kein Directive-Wrapper mehr, sondern ein integraler Bestandteil der Template-Sprache.</p>
                    <div class="showCode">
                        <h4>Code:</h4>
                        <pre [innerText]="codeExampleAtIf"></pre>
                    </div>
                    <div class="assignment-container">
                        <button class="btn" (click)="toggleDisplayAtif()">Ein-/Ausblenden</button>
                        @if (displayAtIf) {
                            <div class="btn-green"></div>    
                        } @else {
                           <div>Content is hidden</div> 
                        }
                    </div>
                </article>
            </section>



            <section id="ngfor">
                <h2>*ngFor</h2>
                <article>
                    <p><code>*ngFor</code> ist eine Struktur-Direktive, die es ermöglicht, einen Codeblock (wie eine Liste oder eine Kartenansicht) für jedes Element in einer Daten-Collection (nicht nur Array, sondern jedwede iterable (durchlaufbare) Datenstrukturen) zu wiederholen. Sie steuert dynamisch, welche HTML-Elemente in der DOM-Struktur erstellt und dargestellt werden. Im Beispiel wirkt sie auf alle Children vom <code>&#60;tr&#62;</code>.</p>
                    <div class="assignment-container">
                        <div class="flex-row">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Nummer</th>
                                        <th>KI / LLM</th>
                                        <th>Anbieter</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let entry of ngForObject">
                                        <td>{{ entry.id}}</td>
                                        <td>{{ entry.name}}</td>
                                        <td>{{ entry.developer}}</td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="showCode">
                                <pre [innerText]="codeExampleNgFor"></pre>
                            </div>
                        </div>

                        <div class="flex-row">
                            <div class="w300">
                                <span *ngFor="let char of ('Angular'.split(''))">
                                {{ char }} -
                                </span>
                            </div>
                            <div class="showCode">
                                <pre [innerText]="codeExampleStringNgFor"></pre>
                            </div>
                        </div>

                    </div>
                </article>
            </section>

            <section id="atFor">
                <h2>&#64;For</h2>
                <article>
                    <p>
                        Mit Angular 17 wurde mit <code>&#64;for</code> eine neue Control-Flow-Syntax eingeführt, die funktional
                        das gleiche Ziel wie <code>*ngFor</code> verfolgt, jedoch klarer strukturiert ist. 
                        Im Gegensatz zur Sternchen-Syntax handelt es sich bei <code>&#64;for</code> um einen echten Template-Block,
                        was die Lesbarkeit erhöht und den Umfang der Schleife eindeutig definiert.
                    </p>

                    <p>
                        Neu ist außerdem, dass ein <code>track</code>-Ausdruck verpflichtend ist.
                        Dadurch wird Angular explizit mitgeteilt, wie einzelne Elemente eindeutig identifiziert werden sollen.
                        Optional kann mit <code>&#64;empty</code> direkt ein Fallback für leere Collections definiert werden,
                        ohne vorher manuell prüfen zu müssen, ob Daten vorhanden sind.
                    </p>
                    <p>
                        Bestehende Templates mit <code>*ngIf</code>, <code>*ngFor</code> und <code>*ngSwitch</code>
                        können mithilfe des Angular-Schematics
                        <code>ng generate &#64;angular/core:control-flow</code>
                        automatisch auf die neue Control-Flow-Syntax migriert werden.
                    </p>


                    <div class="assignment-container">
                        <div class="flex-row">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Nummer</th>
                                        <th>KI / LLM</th>
                                        <th>Anbieter</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (entry of ngForObject; track entry.id) {
                                        <tr>
                                            <td>{{ entry.id}}</td>
                                            <td>{{ entry.name}}</td>
                                            <td>{{ entry.developer}}</td>
                                        </tr>
                                    } @empty {
                                        <h2>Keine Daten vorhanden!</h2>
                                    }
                                </tbody>
                            </table>
                            <div class="showCode">
                                <pre [innerText]="codeExampleAtFor"></pre>
                            </div>
                        </div>

                        <div class="flex-row">
                            <div class="w300">
                                @for (char of ('Angular'.split('')); track $index) {
                                  <span>
                                  {{ char }} -
                                  </span>  
                                }
                            </div>
                            <div class="showCode">
                                <pre [innerText]="codeExampleStringAtFor"></pre>
                            </div>
                        </div>

                    </div>

                </article>
            </section>

            <section id="switch">
                <h2>*ngSwitch</h2>
                <article>
                    <p>Die <code>*ngSwitch</code>-Direktive ist sehr gut dem traditionallem <code>switch</code>-Befehl aus JavaScript vergleichbar.</p>
                    <p><code>*ngSwitch</code> eignet sich besonders, wenn ein einzelner Wert mehrere klar getrennte Anzeigezustände steuert und viele <code>*ngIf</code>-Blöcke unübersichtlich würden. Wichtig ist hier auch die Möglichkeit, einen <code>Default</code>-Wert setzen zu können.</p>
                    <p><i>Hinweis: Für die Nutzung von <code>ngModel</code> muss das FormsModule importiert sein. <code>ngModel</code> wurde nur genutzt, um die Auswahl mit Übergabe zu ermöglichen und ist für <code>*ngSwitch</code> selber nicht notwendig!</i></p>
                
                    <div class="assignment-container">

                        <div>
                            <div class="assignment">
                                <label for="kiChoise">Wähle ein LLM zur Auswertung:</label>
                                <select id="kiChoise" [(ngModel)]="choosenOption">
                                    <option value="" disabled>Bitte wählen Sie eine Option aus</option>
                                    <option *ngFor="let ki of kiOption" [ngValue]="ki">{{ ki }}</option>
                                </select>

                                <div [ngSwitch]="choosenOption">
                                    <h4>Ergebnis der Auswertung</h4>
                                    <p *ngSwitchDefault>Bitte wählen Sie ein Modell aus.</p>
                                    <p *ngSwitchCase="'ChatGPT'">GPT ist der Marktführer für die Code-Generierung.</p>
                                    <p *ngSwitchCase="'Gemini'">Gemini ist stark in der logischen Analyse und TS-Code.</p>
                                    <p *ngSwitchCase="'Claude'">Claude kann große Dateikontexte verarbeiten.</p>
                                    <p *ngSwitchCase="'Llama'">Llama ist lahm. ^^</p>
                                </div>
                            </div>
                        </div>

                        <div class="showCode assignmentCode">
                            <h4>Im Beispiel genutzter Code</h4>
                            <pre [innerText]="codeExampleStringNgSwitch"></pre>
                        </div>
                    </div>
                
                </article>
            </section>


            <section id="atSwitch">
                <h2>&#64;Switch</h2>
                <article>
                    <p>Analog zu Ersetzen von <code>*ngIf</code> und <code>*ngFor</code> mit <code>&#64;if</code> und <code>&#64;for</code> wurde mit Angular 17 <code>*ngSwitch</code> durch die Einführung von <code>&#64;Switch</code> modernisiert. Am grundlegenden  Aufbau hat sich nichts verändert, die Lesbarkeit ist jedoch klarer.</p>
                    <p><i>Achtung: <code>&#64;switch</code> ist keine Direktive. Genau wie <code>&#64;if</code> und <code>&#64;for</code> ist es direkt in die Template-Engine integriert.</i></p>
                    <div class="assignment-container">
                        <div>
                            <div class="assignment">
                                <label for="kiChoise">Wähle ein LLM zur Auswertung:</label>
                                <select id="kiChoise" [(ngModel)]="choosenOptionAt">
                                    <option value="" disabled>Bitte wählen Sie eine Option aus</option>
                                    <option *ngFor="let ki of kiOption" [ngValue]="ki">{{ ki }}</option>
                                </select>

                                <div>
                                    <h4>Ergebnis der Auswertung</h4>
                                    @switch (choosenOptionAt) {
                                        @case ('ChatGPT') {<p>GPT ist der Marktführer für die Code-Generierung.</p>}
                                        @case ('Gemini') {<p>Gemini ist stark in der logischen Analyse und TS-Code.</p>}
                                        @case ('Claude') {<p>Claude kann große Dateikontexte verarbeiten.</p>}
                                        @case ('Llama') {<p>Llama ist lahm. ^^</p>}
                                        @default {<p>Bitte wählen Sie ein Modell aus.</p>}
                                    }
                                </div>
                            </div>
                        </div>

                        <div class="showCode assignmentCode">
                            <h4>Im Beispiel genutzter Code</h4>
                            <pre [innerText]="codeExampleStringAtSwitch"></pre>
                        </div>
                    </div>
                </article>
            </section>

            <section id="ngclass" [ngClass]="colorMode">
                <h2>*ngClass</h2>
                <article>
                    <p>Attribut-Direktiven wie <code>[ngClass]</code> werden verwendet, um CSS-Styles dynamisch zu setzen oder zu entfernen.</p>
                    <p>Es kann mehr als eine Klasse gesetzt werden, auch die Verwendung von Arrays und Objects ist möglich.</p>
                    <div class="assignment-container">
                        <div class="button btn-lightmode" (click)="toggleMode()">Toggle Mode</div>
                        <div class="showCode assignmentCode">
                            <h4>Im Beispiel genutzter Code</h4>
                            <pre [innerText]="codeExampleNgClass"></pre>
                        </div>
                    </div>
                </article>
            </section>

            <section id="ngstyle">
                <h2>*ngStyle</h2>
                <article>
                    <p>Dies ist eine eingebaute Attribut Direktive, mit der man dynamisch CSS Styles inline verändern kann. Aber <code>*ngStyle</code> sollte sparsam genutzt werden, komplexe Styles gehören ins CSS.</p>
                    <div class="assignment-container">
                        <div class="assignment-content">
                            <div class="change-btn">
                                <div class="btn" (click)="change(1)">Größer</div>
                                <div class="btn" (click)="change(16)">16px</div>
                                <div class="btn" (click)="change(-1)">Kleiner</div>
                            </div>
                            <p [ngStyle]="{'font-size.px' : fontSize}">Das ist der Beispieltext</p>
                        </div>

                        <div class="showCode assignmentCode">
                            <h4>Im Beispiel genutzter Code</h4>
                            <pre [innerText]="codeExampleNgStyle"></pre>
                        </div>
                    </div>
                </article>
            </section>

            <section id="assignments">
                <h2>Assignments</h2>
                <article>
                    <p>z.B. 51 + 54 + 57 + 59 im Beispiel</p>
                    <p></p>
                </article>
            </section>


        </main>

    </div>

</section>